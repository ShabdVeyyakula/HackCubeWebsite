<!DOCTYPE html>
<html lang="en">

<head>
    <title>SignUp</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>


    <link rel="stylesheet" type="text/css" href="../CSS/util.css">
    <link rel="stylesheet" type="text/css" href="../CSS/loginstyle.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <!--===============================================================================================-->

</head>

<body>



    <div class="limiter">
        <div class="container-login100" style="background-image: url('images/bg-01.jpg');">
            <div class="wrap-login100 p-l-110 p-r-110 p-t-62 p-b-33">
                <form class="login100-form validate-form flex-sb flex-w">
                    <span class="login100-form-title p-b-53">
                        Sign Up With
                    </span>

                    <a href="#" class="btn-face m-b-20" style="text-decoration: none;">
                        <img src="../Assets/facebook-logo-966BBFBC34-seeklogo.com.png" style="width: 50px;  padding-right: 20px;   font-family: 'Roboto', sans-serif;}
                        ">
                        <p style="font-family: 'Roboto', sans-serif; color: white;">Facebook</p>
                    </a>

                    <a href="#" class="btn-google m-b-20" style="text-decoration: none;" onclick="googleSignIn()">
                        <img src="../Assets/icon-google.png">
                        <p style="font-family: 'Roboto', sans-serif; color: black;">Google</p>
                    </a>

                    <div class="p-t-31 p-b-9">
                        <span class="txt1">
                            Email
                        </span>
                    </div>
                    <div class="wrap-input100 validate-input">
                        <input class="input100" type="text" id="emailInput">
                        <span class="focus-input100"></span>
                    </div>
                    <div class="p-t-31 p-b-9">
                        <span class="txt1">
                            Name
                        </span>
                    </div>
                    <div class="wrap-input100 validate-input">
                        <input class="input100" type="text" id="nameInput">
                        <span class="focus-input100"></span>
                    </div>

                    <div class="p-t-13 p-b-9">
                        <span class="txt1">
                            Password
                        </span>


                    </div>
                    <div class="wrap-input100 validate-input">
                        <input class="input100" type="password" name="pass" id="passInput">
                        <span class="focus-input100"></span>
                    </div>
                    <div class="p-t-13 p-b-9">
                        <span class="txt1">
                            Repeat Password
                        </span>


                    </div>
                    <div class="wrap-input100 validate-input">
                        <input class="input100" type="password" name="pass2" id="passInputRepeat">
                        <span class="focus-input100"></span>
                    </div>
                    <p style="color: red; font-size: 15px; font-family: 'Roboto', sans-serif; display: hidden;
                    "></p>

                    <div class="container-login100-form-btn m-t-17">
                        <button class="login100-form-btn" id="btnSignUp" onclick="signUp()">
                            <p style="font-family: 'Roboto', sans-serif; color: white;">Sign Up</p>
                        </button>
                    </div>


                </form>
            </div>
        </div>
    </div>


    <div id="dropDownSelect1"></div>


    <!-- Insert these scripts at the bottom of the HTML, but before you use any Firebase services -->

    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-app.js"></script>

    <!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
    <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-analytics.js"></script>

    <!-- Add Firebase products that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase.js"></script>

    <script>
        var firebaseConfig = {
            apiKey: "AIzaSyDZ9pYHurpHjpI33InoBi2ZJT_Fdu2Z10w",
            authDomain: "hackerqmobile-newdatabase.firebaseapp.com",
            databaseURL: "https://hackerqmobile-newdatabase.firebaseio.com/",
            projectId: "hackerqmobile-newdatabase",
            storageBucket: "hackerqmobile-newdatabase.appspot.com",
            messagingSenderId: "462903816679",
            appId: "1:462903816679:web:aac71517826ca6f094cd42",
            measurementId: "G-1SVWFLQ5HH"
        };
        firebase.initializeApp(firebaseConfig);

        const txtEmail = document.getElementById("emailInput").value;
        const txtPassword = document.getElementById("passInput").value;
        const btnSignUp = document.getElementById("btnSignUp").value;
        const txtRepeat = document.getElementById("passInputRepeat").value;
        const txtName = document.getElementById("nameInput").value;


        googleSignIn = () => {
            base_provider = new firebase.auth.GoogleAuthProvider();
            firebase.auth().signInWithPopup(base_provider).then(function (result) {
                console.log(result);
                console.log("Success, Google Account Linked");
                var user = result.user;
                var email = user.email;
                name = user.displayName;
                var formattedEmail1 = email.replace(".", "-");
                var _ref = firebase.database().ref().child("UserData").child(formattedEmail1);
                console.log(email);
                console.log(name);
                _ref.child("display name").set(name);
                _ref.child("email").set(email);
                _ref.child("username").set(formattedEmail1);
                
            }).catch(function (err) {
                console.log(err)
                console.log("Google Sign In Failed")
            })


        }



        



        //Add login event


        function signUp() {
            const email = txtEmail;
            const password = txtPassword;
            firebase.auth().createUserWithEmailAndPassword(email, password).catch(function (error) {
                // Handle Errors here.
                var errorCode = error.code;
                var errorMessage = error.message;
                console.log(errorMessage);
                // ...
            });


        }

        firebase.auth().onAuthStateChanged(firebaseUser => {
            if (firebase) {
                console.log(firebase);
                console.log(firebaseUser);

            } else {
                console.log('not logged in')
            }
        })







    </script>


    <link rel="stylesheet" href="../views/layouts/dashboard.html">
</body>

</html>